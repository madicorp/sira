{% extends "sira/base.html" %}

{% load wagtailcore_tags wagtailimages_tags puput_tags %}

{% block title %}{{ self.title }} | {{ blog_page.title }}{% endblock title %}
{% block meta_title %}{% if self.seo_title %}{{ self.seo_title }}{% else %}{{ self.title }}
{% endif %}{% endblock meta_title %}
{% block meta_description %}{% if self.search_description %}{{ self.search_description }}{% else %}
    {{ self.body|striptags|truncatewords:20 }}{% endif %}{% endblock meta_description %}
{% block canonical %}{% canonical_url entry=self %}{% endblock canonical %}
{% block social_share %}
    {% image self.header_image fill-800x450 as share_image %}
    <meta property="og:title" content="{{ self.title }}"/>
    <meta property="og:description" content="


            {% if self.excerpt %}{{ self.excerpt|striptags }}{% else %}{{ self.body|striptags|truncatewords:20 }}{% endif %}"/>
    <meta property="og:url" content="{% canonical_url entry=self %}"/>
    {% if self.header_image %}
        <meta property="og:image" content="{% image_url share_image.url %}"/>
        <meta property="og:image:width" content="800"/>
        <meta property="og:image:height" content="450"/>
        <meta name="twitter:image" content="{% image_url share_image.url %}"/>
    {% endif %}
    <meta name="twitter:card" content="summary_large_image"/>
    <meta name="twitter:title" content="{{ self.title }}"/>
    <meta name="twitter:description" content="{% if self.excerpt %}{{ self.excerpt|striptags }}
                                              {% else %}{{ self.body|striptags|truncatewords:20 }}
                                              {% endif %}"/>
{% endblock social_share %}

{% block content %}
    <header {% if self.header_image %}class="title" {% else %} style="padding-top: 75px"{% endif %}>
        {% if self.header_image %}
            <div class="background-image-holder parallax-background">
                {% image self.header_image fill-1280x720 as header_image %}
                <img class="background-image" alt="{{ self.header_image.title }}" src="{{ header_image.url }}">
            </div>
        {% endif %}
        <div class="container align-bottom">
            <div class="row">
                <div class="col-xs-12">
                    <h1 {% if self.header_image %}class="text-white"{% endif %}>{{ self.title }}</h1>
                    <span class="sub alt-font {% if self.header_image %}text-white{% endif %}">{{ self.date|date:"DATE_FORMAT" }} - {{ self.owner.username }}</span>
                </div>
            </div>
        </div>
    </header>
    <section class="article-single">
        <div class="container">
            <div class="row">
                <div class="col-md-8 col-md-offset-2 col-sm-10 col-sm-offset-1">
                    <div class="article-body">
                        {{ self.body|richtext }}
                    </div>
                </div>
            </div>
        </div>
    </section>
{% endblock content %}

{% block extra_content %}
    {% if self.has_related %}
        {% include 'puput/related_entries.html' with entry=self %}
    {% endif %}
{% endblock extra_content %}
